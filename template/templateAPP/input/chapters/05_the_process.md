# The process

After creating our first piece of code that implements the mediapipe model as a way to extract the landmarks from a human body, we knew that we had to do something with that, because there are several different important data points to analyze.

We set a path for progression that we would follow to achieve our goals. 

![Process Secuence\label{Process Secuence}](process.png){width=75%}

## Data Extraction

In the path to creating a tool for the healthcare system we need to asses their necessities. One of them is the data extraction and clarity. As talked about in this guide on how to create papers for medicine from the medicine research institue on the university of york @Tacconelli2010Apr:

Healthcare decisions, both for individual patients and public policy, should rely on the most reliable research evidence available. It's important for practitioners and decision-makers to stay updated with the latest research and best practices to ensure that their decisions are grounded in sound knowledge. However, this can be challenging due to the vast amount of information generated by various studies, which may suffer from biases, methodological flaws, and contextual dependencies, leading to potential misinterpretation and misrepresentation. Moreover, individual studies may yield conflicting conclusions due to biases, differences in design or chance factors. Consequently, determining the most reliable results or the ones to base decisions on isn't always straightforward.

Systematic reviews aim to address these challenges by identifying, evaluating, and summarizing the findings of all relevant studies, thus making the evidence more accessible to decision-makers. Combining results from multiple studies provides a more accurate and precise estimate of an intervention's effectiveness than relying on a single study. Systematic reviews follow a rigorous scientific design with explicit, pre-specified, and reproducible methods, ensuring that their conclusions are defensible. In addition to highlighting what is known about a particular intervention, systematic reviews also pinpoint areas where knowledge gaps exist, thereby guiding future research endeavors.

Healthcare decision makers increasingly rely on systematic reviews (SRs) of comparative effectiveness research (CER) to understand the benefits and risks of different healthcare interventions. SRs use explicit methods to identify, select, assess, and summarize relevant studies, sometimes including meta-analysis. However, the quality of published SRs varies widely, making it difficult for readers to evaluate them properly. Common issues include poorly documented methods, inappropriate use of techniques like meta-analysis, lack of assessment of underlying research quality, and failure to report funding sources. Additionally, diverse approaches to evidence hierarchies and grading schemes contribute to confusion in the field @morton2011finding.

In this paper from the British Journal of General Practice @Pringle537, the computer databases were retrospectively examined for the recording of 10 major diagnoses in order to look for variations in recorded prevalence that might indicate incomplete recording. In all four practices the computer recording of four major chronic diagnoses was retrospectively assessed and compared with the prevalence of the four diagnoses found from manual medical records and the repeat prescribing system (all four practices used the EMIS integral repeat prescribing system) or found by crosschecking in the computer records for other related diagnoses. The diagnoses used for this diagnostic validation within each practice were: diabetes mellitus, glaucoma, asthma and coronary heart disease. The first two were chosen to assess cases that were not recorded on a computer or were inappropriately coded and the last two were chosen to allow examination of the ratio of active disease to overall recording of disease.

In our case, the data has to be contrasted by specialists in body movement and/or physiotherapy so our data has the validity we need in order to present this data used for a training model as a medical tool.

![Process Secuence Part 1\label{Process Secuence Part 1}](process1.png){width=75%}

For this part of the process there are 2 key factors to take into account when developing the code. The first is that mediapipe works with two types of landmarks, the first is normalized and the second is the real world representation. 

## Data analisis. Angles

During research we have found that a crucial part of the analysis of the human body is the angle in which the body is positioned relative to itself on certain points.

This paper @RAMAKRISHNAN1991969 explores the impact of uncertainties in defining and constructing embedded axes on the estimation of joint angular motion during gait analysis. Using sensitivity analysis, the study assesses the effects of perturbations in the flexion-extension axis on joint angles, employing both Euler and helical angle definitions. Results show that errors in defining the flexion-extension axis significantly affect ab/adduction and rotation angles at the hip and knee joints, particularly in cerebral palsy patients with flexed knee gait patterns. The helical model demonstrates similar sensitivity to axis definition but may be less clinically interpretable compared to the Euler model. The findings underscore the importance of considering these limitations when interpreting joint motion data in pathological gait analysis.

This study @BOCKEMUHL201073 explores how the central nervous system simplifies control of the musculoskeletal system's redundant degrees of freedom (DoFs) by employing synergies in human arm movements. Using optical motion capture, researchers analyzed unrestrained catching movements, finding that three principal components (PCs) captured over 97% of variance in arm posture data. These PCs represent cardinal joint angle synergies, with three being sufficient to explain 80% of the variance across different catching positions. The study concludes that catching movements are characterized by strong kinematic couplings between joints, reducing kinematic complexity to three non-redundant DoFs, which vary systematically with target location.

![Process Secuence Part 2\label{Process Secuence Part 2}](process2.png){width=75%}

At this point, we are interested in evaluating the extracted data and processing it in order to extract the angles making use of the previous knowledge of the body planes to project the skeletal representation of the landmarks and calculate the angles of the joints. The process would be:

- Calculating the vector between joints A, B and C on a certain plane. 
- Calculating the product and the magnitude of the vectors.
- Applying the formula " cos(a) = (AB Â· BC) / (|AB| * |BC|) " 
- The arccos would give us the angle of the B landmark so we can normalize its data.

We do this in the 3 planes and we obtain the angle of the joints for its analisys by the data model. The angles that we take into account are yet to be known from the data model, therefore we need to calculate every single angle of the joints. The joints in mediapipe's landmarks are referenced as a number and we know how they are joined as they give us the prescription on fig x

![Pose landmarks\label{Pose Landmark Numeration}](pose_landmarks_index.png){width=50%}

With this information we can construct a dictionary of the joints with it's connections as values and we can evaluate the data based on that every time. In this case:

0: [1, 4],1: [0, 2],2: [1, 3],3: [2, 7],4: [0, 5],5: [4,6],6: [5,8],7: [3],8: [6],9: [10],
    10: [9],11: [12,13,23],12: [11,14,24],13: [11,15],14: [12,16],15: [13,17,19,21],16: [14,18,20,22],17: [19,15],18: [20,16],19: [17,15],
    20: [18,16],21: [15],22: [16],23: [11,24,25],24: [12,23,26],25: [23,27],26: [24,28],27: [29,31],28: [30,32],29: [27,31],
    30: [28,32],31: [27,29],32: [28,30]

It is important to note that there are some landmarks that are only adjacent to one other point, and for an angle to be calculated, there has to be 3 points.
